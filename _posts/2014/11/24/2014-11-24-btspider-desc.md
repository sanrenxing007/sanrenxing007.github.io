---
layout : life
title : BTspider介绍
category : 程序
date : 2014-11-24 15:30
---

# 程序架构
BTspider磁力搜索程序基于DHT + BT协议开发（即P2P技术），并不像采集国外种子站程序或小偷程序面临被封杀风险。

程序由爬虫+网站两部件组成，运行环境为Linux，采用MySQL存储数据，使用Redis作为队列。用Redis做队列，可以让爬虫在多个服务器运行并协作，即为分布式爬虫。

网站和爬虫各有自己的后台管理系统, 方便于拆分进行分布式部署.

网站部分采用高效的coreseek进行全文索引和分词，大大减少MySQL服务器资源占用，使得网站搜索和访问更加迅速。

程序Web端采用PHP编写，可实现网站、数据库、爬虫等各部件分离，安全系数大大增强，同时可以规避版权问题所带来的风险。懂PHP的站长，还可以还自定义程序模板。

# 爬取效率
经实测，我们的爬虫在双核2.4GhzCPU，1G内存，100M共享带宽的日本樱花VPS上，每天可以爬取20万左右不重复资源。更有甚者，一客户的服务器每天可以爬取120-140万不重复资源。爬虫爬取效率主要取决于服务器配置、带宽，目前我们的爬虫效率在同类网站中趋于前列。

必须说明下，同等配置和带宽，国外机房要比国内机房爬取效率高。

目前98%的磁力网站用的是第三方种子库网站，比如迅雷，而迅雷的“接口”总是会变，破解难度较高，也很容易被封杀。当然，实现DHT+BT协议进行爬取的难度更高，这不仅仅需要研究透协议，更重要的是对DHT网络有深刻的理解，不然也不会仅有2%的是DHT爬虫了。

如果您专门为网站部件和爬虫部件各分配一个服务器，速度会快到您无法想象。[我们的演示站](http://demo.btspider.cc)专门为网站部件和爬虫部件各分配了一个同等配置的服务器，把爬虫部件所在的服务器榨干50%的情况下，每天保持着20万-25万的速度。PS: 数据越多, 收集速度就慢慢降下来.